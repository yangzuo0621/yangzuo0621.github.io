---
title: memory-model
date: 2017-07-29 21:56:53
categories:
- Java
tags:
- 学习笔记
---

### Java内存模型

Java内存采用共享内存的方式来共享变量。在Java内存模型中，所有的变量都存储在`主内存`中，每个线程有自己的`工作内存`。线程的工作内存中保存着主内部中变量的副本。线程对变量的所有操作都是在自己的工作内存中进行，并通过主内存在不同线程中传递变量。

Java内存模型目的是为了屏蔽掉各种硬件和操作系统的内存访问差异，达到Java程序在各种平台上有一致的内存访问效果。

#### volatile型变量

关键字`volatile`是Java虚拟机提供的最轻量级的同步机制。被volatile修饰的关键字具有两种语义：

1. 保证变量对所有线程的可见性。即当一个线程修改了这个变量的值，新值对于其他线程来说是立即可见。但它并不能保证原子性。
2. 禁止指令的重排序优化。即它保证了在它之前的操作都已经完成。

PS：欢迎批评指正。
> 参考：深入理解Java虚拟机 —— Java内存模型 第12章